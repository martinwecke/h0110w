$(document).ready(function(){h0110w.init()});var h0110w=function(){var a=new Array;a.debug=!0,a.default_text="<strong>h0110w</strong><br><br>Transient publishing.";var b=function(){k("h0110w.init()"),$("html").addClass("js"),i.init(),j.init(),g.init(),f.init(),$(".content").focus()},c=function(a){var b=LZString.compressToBase64(a);return k("Compression ratio: "+e(a,b)+"%"),b},d=function(a){var b=LZString.decompressFromBase64(a);return b},e=function(a,b){var c=parseInt(b.length/a.length*100);return c},f=function(){var b,c=function(){k("url.init()"),b=window.location.href.replace(window.location.hash,"");var c=decodeURIComponent(location.href.replace(b,""));if("#/"==c.substr(0,2)&&(c=c.substr(2)),c.length>0){var e=d(c);g.update(e)}else g.update(a.default_text);g.focusEnd(),j.update(b+"#/"+c)},e=function(a){history.replaceState(0,document.title,b+"#/"+a)};return{init:function(){c()},update:function(a){e(a)},getBaseURL:function(){return b}}}(),g=function(){var a,b=function(){a=e(),d(),l()},d=function(){is_typing=!1,a.on("blur keyup",function(){k("on.keyup"),is_typing||(is_typing=!0,setTimeout(function(){is_typing=!1,g()},1e3))}),a.on("mouseup",function(){k("on.mouseup()"),""!=h()?(k("on.select()"),i.show()):i.hide()})},e=function(){k("content.build()");var a=$("<div></div>");return a.addClass("content").attr("contenteditable","true").attr("onpaste","h0110w.clipboard.paste( this, event );"),$("body").append(a),a},g=function(){var b=a.html(),d=c(b);f.update(d),j.update(f.getBaseURL()+"#/"+d)},h=function(){var a="";return window.getSelection?a=window.getSelection():document.getSelection?a=document.getSelection():document.selection&&(a=document.selection.createRange().text),a},l=function(){var b,c;document.createRange?(b=document.createRange(),b.selectNodeContents(a[0]),b.collapse(!1),c=window.getSelection(),c.removeAllRanges(),c.addRange(b)):document.selection&&(b=document.body.createTextRange(),b.moveToElementText(a[0]),b.collapse(!1),b.select())},m=function(a){k("content.format( "+a+" )"),document.execCommand(a)},n=function(b){a.html(b)};return{init:function(){b()},getSelection:function(){h()},focusEnd:function(){l()},format:function(a){m(a)},update:function(a){n(a)}}}(),h=function(){var a=function(a,b){document.execCommand("insertText",!1,b.clipboardData.getData("text/plain")),b.preventDefault()};return{paste:function(b,c){a(b,c)}}}(),i=function(){var a,b=function(){a=d(),c()},c=function(){$(document).on("click",".tools a",function(a){a.preventDefault();var b=$(this).attr("data-format");g.format(b)})},d=function(){k("tools.build()");var a=$('<div class="tools" contenteditable="false"></div>'),b=new Array;return b.push($('<a href="javascript:void(0)" class="strong" data-format="bold" title="strong">A</a>')),b.push($('<a href="javascript:void(0)" class="emphasize" data-format="italic" title="emphasize">A</a>')),b.push($('<a href="javascript:void(0)" class="remove" data-format="removeFormat" title="remove Format">&#x2715;</a>')),$.each(b,function(){a.append($(this))}),a.prependTo($("body")),a},e=function(){k("tools.show()"),setTimeout(function(){a.addClass("active")},1)},f=function(){k("tools.hide()"),a.removeClass("active")},h=function(){b(),a.delay(500).remove()};return{init:function(){b()},build:function(){d()},show:function(){e()},hide:function(){f()},destroy:function(){h()}}}(),j=function(){var a,b=function(){a=d(),c()},c=function(){a.find(".share").on("click",function(a){a.preventDefault()}),a.find(".share input").on("click",function(){$(this).select()})},d=function(){k("nav.build()");var a=$("<nav></nav>");return a.append('<a href="#" class="share">Share<span><input type="text" name="url" value="" readonly="readonly"/></span></a>').append('<a href="'+f.getBaseURL()+'" class="new" target="_blank">New</a>'),a.appendTo($("body")),a},e=function(b){a.find(".share input").attr("value",b)};return{init:function(){b()},update:function(a){e(a)}}}(),k=function(b){a.debug&&"undefined"!=typeof console&&console.log(b)};return{init:function(){b()},clipboard:h}}();